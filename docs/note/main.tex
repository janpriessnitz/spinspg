\documentclass[a4paper, 11pt]{article}

% add warnings
\RequirePackage[l2tabu, orthodox]{nag}
\usepackage[all, warning]{onlyamsmath}

%codification of the document
\usepackage[utf8]{inputenc}
% font
\usepackage{newtxtext}  % Times and Helvetica
% mathematical features
\usepackage{amsmath, amssymb}
\usepackage{amsthm}
\theoremstyle{definition}
\usepackage{mathtools}
% screen
\usepackage{ascmac}
% url
\usepackage{url}
% for images
\usepackage{graphicx}
% chemical formula
\usepackage[version=3]{mhchem}
% appendix
\usepackage[toc,page]{appendix}
% add bibliography in TOC
\usepackage[nottoc]{tocbibind}
% hyperlink
\usepackage[svgnames,psnames]{xcolor} % better color for hyperref
\usepackage[colorlinks,citecolor=DarkGreen,linkcolor=FireBrick,linktocpage,unicode]{hyperref} % add hypertext capabilities
% color
\usepackage{color}
% page size and margins
\usepackage{geometry}
% citation
\usepackage{cite}
% Tikz
\usepackage{tikz}
\usetikzlibrary{positioning,arrows.meta,shapes}
% longtable
\usepackage{longtable}

\usepackage{bm}

% *matter for article class
% https://tex.stackexchange.com/questions/154646/is-there-an-easy-way-to-get-the-frontmatter-mainmatter-and-backmatter-in-a-l
\makeatletter
\newcommand\frontmatter{%
  \cleardoublepage
  %\@mainmatterfalse
  \pagenumbering{roman}}
\newcommand\mainmatter{%
  \cleardoublepage
  % \@mainmattertrue
  \pagenumbering{arabic}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% follow https://cdn.journals.aps.org/files/styleguide-pr.pdf
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\appendixref}[1]{Appendix~\ref{#1}}
\newcommand{\software}[1]{\texttt{#1}}

\newcommand{\term}[1]{\textit{#1}}
\newcommand{\todo}[1]{\textcolor{red}{TODO: #1}}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
% https://zrbabbler.hatenablog.com/entry/20120411/1334151482
\newcommand{\relmiddle}[1]{\mathrel{}\middle#1\mathrel{}}
\newcommand{\set}[2]{\left\{ #1 \relmiddle| #2 \right\}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\DeclareMathOperator*{\argmin}{arg\,min}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition}

\title{Spin space group}
\author{Kohei Shinohara}
\date{\today}

\begin{document}
\maketitle
\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{sec_operation.tex}
\input{sec_group.tex}
\input{sec_search.tex}
\input{sec_identification.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Symmetrization of spin arrangement}

\todo{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix

\input{appx_procrustes.tex}
% \input{appx_spin_point_group.tex}

\section{\label{appx:group}Group product}

\begin{screen}
  \begin{definition}[Internal direct product]
    Let $G$ be a group.
    If $G$ has normal subgroups $H, K \trianglelefteq G$ such that $HK = G$ and $H \cap K = \{ 1 \}$, $G$ is called a \term{internal direct product} of $H$ and $K$, denoted as $G = H \times K$.
  \end{definition}
\end{screen}

\begin{screen}
  \begin{definition}[Internal semidirect product]
    Let $G$ be a group.
    If $G$ has a normal subgroup $N \trianglelefteq G$ and a subgroup $H \leq G$ such that $NH = G$ and $N \cap H = \{ 1 \}$, $G$ is called a \term{internal semidirect product} of $N$ and $H$, denoted as $G = N \rtimes H = H \ltimes N$.
  \end{definition}
\end{screen}

If group $G = N \rtimes H$ is a semidirect product, there is a group homomorphism $\phi: H \to \mathrm{Aut}(N)$ with $\phi(h)(n) = h n h^{-1}$ for $h \in H$ and $n \in N$.
We also write the semidirect product as $G = N \rtimes_{\phi} H = H \ltimes_{\phi} N$.

A group is not necessarily a semidirect product of its nontrivial normal subgroup and a subgroup.
The cyclic group $\mathbb{Z}_{4}$ is a counterexample.
$\mathbb{Z}_{4}$ has an exact sequence $\mathbb{Z}_{2} \overset{\iota}{\hookrightarrow} \mathbb{Z}_{4} \overset{\times 2}{\twoheadrightarrow} \mathbb{Z}_{2}$, where $\iota: \mathbb{Z}_{2} \ni n \mapsto n \in \mathbb{Z}_{4}$ and $\times 2: \mathbb{Z}_{4} \ni n \mapsto 2n \in \mathbb{Z}_{2}$.
However, if $\mathbb{Z}_{4}$ was a semidirect product $\mathbb{Z}_{2} \rtimes \mathbb{Z}_{2}$, it would be isomorphic to $\mathbb{Z}_{2} \times \mathbb{Z}_{2}$ because $\mathrm{Aut}(\mathbb{Z}_{2}) = \{ 1 \}$.

Ref.~\cite{RevModPhys.35.641}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% References
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{unsrt}
\bibliography{reference}


\end{document}
